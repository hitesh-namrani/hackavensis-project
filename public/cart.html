<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Your Cart - CanteenOS</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;800&display=swap');
        body { font-family: 'Poppins', sans-serif; }
    </style>
</head>

<body class="bg-gradient-to-br from-red-500 via-orange-400 to-yellow-400 min-h-screen font-sans pb-10">

    <div class="p-6 flex items-center gap-4 text-white sticky top-0 z-20">
        <a href="menu.html" class="p-2 bg-white/20 rounded-full hover:bg-white/30 backdrop-blur-sm transition shadow-md">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" /></svg>
        </a>
        <h1 class="text-2xl font-black tracking-wide drop-shadow-md">My Cart</h1>
    </div>

    <div class="max-w-md mx-auto px-4 space-y-6">

        <div id="emptyCart" class="hidden flex flex-col items-center justify-center h-[50vh] text-white">
            <div class="w-28 h-28 bg-white/20 rounded-full flex items-center justify-center mb-6 backdrop-blur-sm animate-pulse">
                <span class="text-5xl">üçΩÔ∏è</span>
            </div>
            <h2 class="text-2xl font-bold mb-2">Cart is Empty</h2>
            <p class="text-white/80 mb-6 text-sm">Looks like you haven't added anything yet.</p>
            <a href="menu.html" class="bg-white text-red-600 px-8 py-3 rounded-full font-black shadow-xl hover:scale-105 transition-transform uppercase tracking-wider">Add Food</a>
        </div>

        <div id="cartContent" class="bg-white rounded-3xl shadow-xl p-6">
            
            <div class="flex justify-between items-center mb-4 border-b border-gray-100 pb-4">
                <h2 class="text-lg font-black text-gray-800">Order Summary</h2>
                <span class="bg-red-50 text-red-600 text-xs font-bold px-3 py-1 rounded-full">CanteenOS</span>
            </div>

            <div id="itemsContainer" class="space-y-4 mb-6 max-h-[40vh] overflow-y-auto pr-2">
                </div>

            <div class="bg-gray-50 rounded-xl p-4 text-sm border border-gray-100">
                <div class="flex justify-between mb-2 text-gray-500">
                    <span>Item Total</span>
                    <span class="font-medium text-gray-900">‚Çπ<span id="itemTotal">0</span></span>
                </div>
                <div class="flex justify-between mb-2 text-gray-500">
                    <span>Tax (5%)</span>
                    <span class="font-medium text-gray-900">‚Çπ<span id="tax">0</span></span>
                </div>
                <div class="border-t border-dashed border-gray-300 my-3"></div>
                <div class="flex justify-between font-black text-xl text-gray-900">
                    <span>To Pay</span>
                    <span class="text-red-600">‚Çπ<span id="grandTotal">0</span></span>
                </div>
            </div>

            <button onclick="goToPayment()" class="w-full mt-6 bg-gray-900 hover:bg-black text-white font-bold py-4 rounded-xl text-lg shadow-xl active:scale-95 transition-all flex justify-between px-6 items-center group">
                <div class="flex flex-col items-start leading-none">
                    <span class="text-[10px] text-gray-400 font-normal mb-1">TOTAL</span>
                    <span>‚Çπ<span id="btnTotal">0</span></span>
                </div>
                <span class="flex items-center gap-2 group-hover:translate-x-1 transition-transform">
                    Proceed
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3" /></svg>
                </span>
            </button>

        </div>
    </div>

    <script>
        // 1. Load Cart Data
        let cart = JSON.parse(localStorage.getItem('canteenCart')) || [];
        
        const container = document.getElementById('itemsContainer');
        const emptyCart = document.getElementById('emptyCart');
        const cartContent = document.getElementById('cartContent');

        // 2. Render Logic
        if (cart.length === 0) {
            cartContent.classList.add('hidden');
            emptyCart.classList.remove('hidden');
        } else {
            let itemTotal = 0;
            
            cart.forEach((item, index) => {
                itemTotal += item.price * item.quantity;
                
                const itemDiv = document.createElement('div');
                itemDiv.className = 'flex justify-between items-center border-b border-gray-50 last:border-0 pb-3 last:pb-0';
                itemDiv.innerHTML = `
                    <div class="flex items-start gap-3">
                        <div class="bg-gray-100 text-gray-600 text-xs font-bold h-8 w-8 flex items-center justify-center rounded-lg mt-1">
                            ${item.quantity}x
                        </div>
                        <div>
                            <p class="font-bold text-gray-800 text-sm">${item.name}</p>
                            <p class="text-xs text-gray-400">@ ‚Çπ${item.price}</p>
                        </div>
                    </div>
                    <div class="flex items-center gap-3">
                        <span class="font-bold text-gray-800 text-sm">‚Çπ${item.price * item.quantity}</span>
                        <button onclick="removeItem(${index})" class="text-red-400 hover:text-red-600 p-1 rounded transition hover:bg-red-50">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" /></svg>
                        </button>
                    </div>
                `;
                container.appendChild(itemDiv);
            });

            // Calculate Totals
            const tax = Math.round(itemTotal * 0.05);
            const grandTotal = itemTotal + tax;

            document.getElementById('itemTotal').innerText = itemTotal;
            document.getElementById('tax').innerText = tax;
            document.getElementById('grandTotal').innerText = grandTotal;
            document.getElementById('btnTotal').innerText = grandTotal;
        }

        // 3. Remove Item
        function removeItem(index) {
            cart.splice(index, 1);
            localStorage.setItem('canteenCart', JSON.stringify(cart));
            location.reload(); 
        }

        // 4. Go to Payment
        function goToPayment() {
            window.location.href = "payment.html";
        }
    </script>
</body>
</html>
